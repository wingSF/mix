# 网络通信基础
* 七层网络模型
    * 应用层->表示层->会话层->传输层->网络层->数据链路层->物理层
* 四层网络模型
    * 应用层--------------->传输层->网络层->链路层
* 协议
    * 俩个需要通信的网络程序约定的数据报文的交换方式
    * 常见协议
        * 网络层协议
            * ip
                * 提供了一组数据报文服务，每组分组报文都由网络独立处理和发送
                * 丢失/乱序/重复发送
        * 传输层协议
            * tcp/ip
                * 在俩个程序之间先建立tcp连接，再通信
                * 可靠的传输协议
            * udp
                * 不可靠的协议
            * multicast
* io: BIO/NIO/AIO
* NIO框架: netty/mina
* 数据发送接收过程
    * 一次http请求发送和到达的处理过程  
        * `http报文->加tcp头->加ip头->加mac头->网络->去mac头->去ip头->去tcp头->http报文`
    * tcp头
        * 表示当前的协议头
        * 会携带端口号，标识要接收的进程端口号
    * ip头
        * 表示通讯地址
        * 接收时判断ip地址，是否是当前网卡的，不是就转发网络
    * mac头
        * 表示mac地址
        * 接收时，校验mac地址与自己是否一直
    * 网络
        * 在中间的网络过程中，是以01的比特流来通信的
    > mac是一块网卡的唯一标识，ip地址是网络中唯一的标识  
* tcp  
    * 三次握手，四次挥手(握手/挥手其实是数据包)
        * 建立连接
            * a向b发第一个数据包，请求建立连接
            * b向a发第二个数据包，同意建立连接
            * a向b发第三个数据包，同意响应收到
        * 释放连接
            * a向b发第一个数据包，请求释放连接
            * b向a发第二个数据包，释放请求同意，开始清理资源
            * b向a发第三个数据包，连接可以释放了
            * a向b发第四个数据包，同意释放连接消息已经收到  
    * 报文核心字段
        * 源端口 16位
        * 目标端口 16位
        * Seq序号 32位
            * 本次发送报文的第一个字节在整个报文中的序号
            * 保证了传输的有序性
        * Ack序号 32位
            * 期望发送方下次发送消息的起始位置的序号
        * 数据偏移 4位
            * 报文数据段的起始位置相对于tcp报文起始位置的距离，其实就是tcp头部的长度
        * 保留位 6位
        * 6bit把握字段
            * 紧急比特URGent
                * 当URG=1时，注解此报文应尽快传送，而不应该按本来的队列次序来传送
            * 确认比特ACK
                * 当ACK=1时，Ack序号字段才有效(注意大小写)
            * 急迫比特PSH
                * 当PSH=1时，注解恳求远端tcp将本报文段立即传送给其应用层，而不要等缓冲区填满来再上传
            * 复位比特ReSet
                * 当RSH=1时，出现错误，必须释放连接，重新建立。还可以用来拒绝非法的报文段或拒绝打开连接
            * 同步比特SYN
                * 在建立连接时使用，当SYN=1，ACK=0，是一个连接建立的请求报文，若对方同意建立连接，响应SYN=1 ACK=1
            * 终止比特FINal
                * 在释放连接时使用，当FIN=1，表示报文已经发送完成，请求断开连接
        * 窗口 16位
            * 从本报文段的确认号开始，允许发送的数据量
        * 校验和 16位
            * 用于数据校验
        * 紧急指针 16位
            * 只有当URG=1时，才有效。
        * 选项填充
        * 数据部分
            * 可选的，连接建立和终止时，只有TCP首部
            
    