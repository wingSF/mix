# mysql B+树的使用
* Innodb会自动为主键列建立聚簇索引
    * 聚簇索引
        * 叶子节点保存列完整的用户数据
        * 索引及数据，数据及索引，相比MyIsam来说
* 二级索引
    * 不是使用主键建立的索引
    * 为满足针对某列查询时的需求，而产生
        * 当将多个列一起建立索引，称之为`联合索引`
    * 建立时，会把数据的某些列值排序，重新建立一个B+树
        * 叶子节点存储的是主键信息
        * 需要再到聚簇索引里面查一次，这个叫`回表`
        * 如果二级索引列保存的内容，能满足查询要求，叫`覆盖索引`，无需回表
        > 回表，被诟病的原因是，获取到主键id之后，再去查询聚簇索引的过程是随机io
* 注意事项
    * 数据最好是顺序插入，这样在页分裂的时候，代价下
    * 联合索引情况下，=值判断的顺序无需care，优化器会选择对的索引
    * 联合索引情况下，查询要从最左的列开始筛选
    * 联合索引情况下，范围查询，只有第一列能会生效
    * 字符串做索引的情况下，可以适当保留前几位，不需要全部假如索引，太长，会导致索引变大
    > 字符串索引，最好使用`xxx%`模式  
    * 排序时，如果返回顺序于索引建立顺序一致，能减少消耗，否则触发filesort将会变慢
    * 必须保证索引列是以单独列的形式出现，否则无法使用索引
    * 可以合理使用limit，帮助优化器分析是否将二级索引+回表操作，改成扫全表
    * 索引列的基数，不相同的值的个数，越大越好，区分度越高
    * 索引列的类型尽量小
# B树
    * 前提条件：叶子节点与非叶子节点
    * 特性
        * 非叶子节点拥有字节点的数量的范围需要预先定义
        * 当某个节点上的数据新增或删除时，可能会触发节点的合并或者分离，也可能不发生变化(此时会产生空间浪费)
        * 如果一个非叶子节点包含3个子树，那该节点有2个key[key1,key2]，1子树的key都小于key1,2子树的key都在key1和key2之间，3子树的key都大于key2
    
    
    
> [wikipedia](https://zh.wikipedia.org/wiki/B树)  
[cnblogs](https://www.cnblogs.com/hdk1993/p/5840599.html)