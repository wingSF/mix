# raid
* [推荐阅读](https://www.hack520.com/169.html)
* 名次解释
    * a case of redundant array of inexpensive disks
    * redundant array of independent disks
    > 果然钱还是最原始的出发点，随着成本降低，将廉价改成独立
    * 通俗叫法：磁盘阵列
* 目标
    * 使用冗余的磁盘实现磁盘的高可用，同时可以部分提升读写性能
* 等级划分
    * RAID0-RAID5，原始论文定义的等级
    * RAID6，之后扩展
    * RAID7、RAID10/01、RAID50、RAID53、RAID100，存储厂商推出的
* 软RAID/硬RAID/软硬混合RAID
    * 软RAID的所有操作都由操作系统和cpu来完成，没有独立的RAID控制/处理芯片，io处理芯片
        * 效率最低
    * 硬RAID配置了专门的RAID控制/处理芯片，io处理芯片，阵列缓冲
        * 不占用cpu资源，但是成本较高
    * 混合RAID有RAID控制/处理芯片，但缺乏io处理芯片，
        * 需要cpu和驱动程序来完成io操作
        * 成本介于软硬之间
* 基本原理
    * 重新定义
        * RAID是由`` 多个独立 ``的高性能磁盘驱动器组成的磁盘子系统，从而提供`` 比单个磁盘更高 ``的`` 存储性能 ``和`` 数据冗余 ``的技术
        * RAID是一类多磁盘管理技术，其向主机环境提供了``成本适中``、``数据可靠性高``的高性能存储
        * RAID是一种``磁盘阵列``
            * 部分物理存储空间用来记录保存在剩余空间上的用户数据的冗余信息
            * 当其中某一个磁盘或访问路径发生故障时，冗余信息可用来重建用户数据
* RAID初衷
    * 为大型服务器提供高端的存储功能和冗余的数据安全
    * 由俩个或更多次磁盘组成的存储空间，通过并发地在多个磁盘上读写数据来提高存储系统的I/O性能
    * 大多数RAID等级，具有完备的`数据校验`、`纠正措施`，从而提高来系统的容错性
    * 甚至镜像方式，大大增强系统的可靠性
* RAID目标
    * 提高数据可靠性能
        * 虽然数据分散在多个磁盘中，但对于计算机来说，就像操作一个单独的磁盘
        * 通过把相同的数据同时写入多块磁盘，或者将计算的校验数据写入阵列中来获得冗余能力
            * 当单块磁盘故障时可以保证数据不丢失
        * 部分等级下允许更多的磁盘发生故障，RAID6，最多俩块磁盘同时损坏
            * 可以用新磁盘代替旧磁盘，数据会自动重建
                * 重建的过程中，读写性能会下降
                * 有的替换必须停机，有的不需要
                    * 适用于系统不能停机或尽可能少的停机事件
    * I/O性能
        * 数据分散保存在RAID中的多个不同磁盘上，并发数据读写要大大优于单个磁盘，因此可以获得更高的聚合io带宽
        * 弊端就是会浪费一些存储空间
            * 例如RAID1，磁盘利用率只有50%
            * RAID5，空间利用率(n-1)/n
        > iops：Input/Output Operations Per Second
    * RAID不可作为数据备份的替代方案            
        * 当非磁盘故障造成的数据丢失发生时，RAID无能为力
            * 比如执行了误操作
        * 数据备份、容灾等数据保护措施非常必要，但是与RAID是不同层次的安全性            
* RAID技术细节
    * 镜像(Mirroring)
        * 将数据复制到多个盘，提高读性能&可靠性，但是写变得复杂，要确保数据正确写入了多个磁盘
        * 优点
            * 镜像的方式，是完全的副本，替换灵活，故障恢复快
        * 缺点
            * 可以并行读,但不能并行写
            * 空间利用率低，如果是2个备份，那利用率就是50%
            * 要求写多个副本，写性能会降低
    * 数据条带(Data Stripping)
        * 将数据分片保存在多个不同的磁盘，多个数据分片共同组成一个完整数据副本，与镜像副本不同
            * 磁盘写入读取，有一个磁头寻道定位过程，这是一个慢速的机械运动，无法与高速的cpu匹配
            * 单个磁盘驱动器性能存在物理极限，数据条带技术将数据以快的方式分布存储在多个磁盘上
            * 通过并发写，产生非常高的聚合i/o，提升i/o性能，且可以线性扩展
        * 访问数据时，可以同时对位于不同磁盘上的数据进行读写操作，从而获得非常客观的i/o性能提升
        * 数据条带是基于i/o性能提出的
            * 优势
                * 分块的粒度可能是字节或者kb，分块越小，并行处理能力越强，存取速度越快
            * 劣势
                * 会增加 块存取 的随机性
                * 会增加 块寻址 的时间
                * 任何一个条带损坏，都会导致数据不可用
    * 数据校验(Data parity)
        * 以上俩中方案的折衷，RAID通过组合上述俩种技术
        * 利用冗余数据进行数据错误检测和修复
        > 海明码   异或
        * 利用校验功能，可以提高磁盘阵列的可靠性、鲁棒性和容错能力
        > 鲁棒性：Robust的音译，健壮性
* RAID的特点
    * 大容量
        * 由多个磁盘组成的RAID系统具有海量的存储空间
            * 单个磁盘1TB，磁盘整列就可以达到PB级别。
            * RAID会有冗余，容量利用率一般在50%-90%之间
    * 高性能
        * 单个磁盘的io受限于接口、带宽等计算机技术的限制
        * 通过数据条带技术，将数据i/o分散在多个成员磁盘上，从而获得更高的聚合i/o性能
    * 可靠性
        * 利用冗余和数据校验的方法，在若干磁盘出错的情况下，不会导致数据丢失，不影响系统的持续运行
    * 可管理性
        * RAID将多个磁盘放在一起管理，可以动态增减磁盘驱动器，自动进行数据校验和数据重建，简化了管理工作
* RAID等级
    * JBOD 
        * just a bunch of disks
        * 磁盘串联，不提供安全保护
        * 不是标准的RAID等级
    * RAID标准等级
        * RAID0
            * 使用了数据条带，但是没有数据校验功能
            * 使用率高，读写效率高，但是磁盘损坏，数据不可恢复
        * RAID1
            * 只使用了镜像技术，利用率50%
            * 写入慢，读取无影响
        * RAID2
            * 使用了数据条带，有数据校验功能
            * 但成本高，性能受限于最慢的磁盘驱动器
        * RAID3
        * RAID4
        * RAID5
        * RAID6
    * RAID组合等级
        * 标准的RAID等级各有优劣，出现了组合
        * RAIDxxx
        > 见原文把，我要吐了。。。
> 结语，可能看完也对你提升不了多少，就当培养学习兴趣了，哈哈～
